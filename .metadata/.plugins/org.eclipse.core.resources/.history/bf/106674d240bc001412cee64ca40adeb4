$(document).ready(function (){
	var box			= $("#angleBox");
	var beginX		= window.innerWidth/2;
	var beginY		= window.innerHeight/2;
	
	
	var radius		= 350;
	
	var svg			= $('svg');
	
	var circle		= $('#mainCircle');
	
	var sinLine 	= $("#sinLine");
	var cosLine		= $("#cosLine");
	var tgLine		= $("#tgLine");
	var cotgLine	= $("#cotgLine");
	var angleArm	= $("#angle");
	
	
	svg.css({
		width:  window.innerWidth,
		height: window.innerHeight
	});
	
	circle.attr({
		cx : beginX,
		cy : beginY,
		r : radius
	});
	
	sinLine.attr({
		x1: beginX,
		y1: 0,
		x2: beginX,
		y2: window.innerHeight
	});
	
	
	cosLine.attr({
		x1: 0,
		y1: beginY,
		x2: window.innerWidth,
		y2: beginY
	});
	
	
	tgLine.attr({
		x1: beginX + radius,
		y1: 0,
		x2: beginX + radius,
		y2: window.innerHeight
	});
	
	cotgLine.attr({
		x1: 0,
		y1: beginY - radius,
		x2: window.innerWidth,
		y2: beginY - radius
	});
	
	angleArm.attr({
		x1: beginX,
		y1: beginY
	});
	
	var angle = 0;
	
	
	var animator;
	
	$("#angleBox").keydown(function (){
		var angle = parseInt(box.val());
		var radians = (Math.PI * 2) * (angle % 360) / 360 ;
		angleArm.animate({},{
			step: function (){
				$(this).attr("x2", beginX + (Math.cos(radians) * radius));
				$(this).attr("y2", beginY - (Math.sin(radians) * radius));
			}
		});
	});
	
	
	//animateAngle();
	
	function animateAngle(){
		var toAngle = parseInt(box.val());
		
		if(angle-toAngle > 0){
			angle -= 1;
		}else if (angle-toAngle < 0){
			angle += 1;
		}else{
			
		}
		var radians = (Math.PI * 2) * (angle % 360) / 360 ;
		
		x = beginX + (Math.cos(radians) * radius);
		y = beginY - (Math.sin(radians) * radius);
		
		
		angleArm.attr("x2", x);
		angleArm.attr("y2", y);
		
		animator = setTimeout(animateAngle, 10/Math.abs(angle-toAngle));
	}
	
});

